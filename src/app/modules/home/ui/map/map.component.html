<agm-map #agmMap [latitude]="lat" [longitude]="lng" (mapClick)="MapClick($event)">

  <ng-container *ngIf="Mode != Modes.OnlyMap">
    <agm-snazzy-info-window
      *ngFor="let item of Points; let i = index"
      [isOpen]="true"
      [latitude]="item.lat"
      [longitude]="item.lng"
      [showCloseButton]="false"
      [padding]="'3px'"
      [borderRadius]="'5px'"
      [closeOnMapClick] = "false"
      [backgroundColor]="item.selected?'#FFA901':'#ffffff'"
    >
      <ng-template>
        <img class="map-img" (click)="SelectInfoWindow(i)" src="../../../../../assets/images/map-img.png" alt="">
      </ng-template>
    </agm-snazzy-info-window>

    <ng-container *ngIf="Mode == Modes.AddPlace && NewPlace.lat && NewPlace.lng">
      <agm-marker
        [latitude]="NewPlace.lat"
        [longitude]="NewPlace.lng"
        [iconUrl]="'../../../../../assets/images/betrip-cursor.svg'"
      ></agm-marker>
    </ng-container>


    <ng-container *ngIf="Mode == Modes.CreateRoute">
      <agm-polyline
        *ngFor="let line of Polylines; let i = index"
        [strokeColor]="'#3A1B5A'"
      >
        <agm-polyline-point
          [latitude]="line.start.x"
          [longitude]="line.start.y">
        </agm-polyline-point>
        <agm-polyline-point
          [latitude]="line.end.x"
          [longitude]="line.end.y">
        </agm-polyline-point>
      </agm-polyline>
    </ng-container>
  </ng-container>

</agm-map>
